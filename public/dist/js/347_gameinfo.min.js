function ytScriptFire(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),ytScript=!0}!function(e,t,n){if(e===n)throw"not found jQuery";var o={template:function(){return e.parseHTML("<span/>")[0]},className:"char",tagName:"span",excludeSelectors:"select option textarea ol ul dl".split(" "),splitReg:/([\uD800-\uDBFF][\uDC00-\uDFFF]|[\u2000-\u200F\t\s \u3000]+|.)/g,testReg:/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\u2000-\u200F\t\s \u3000\u0323]/},i="function"==typeof e.fn.addBack?"addBack":"andSelf",a={getTemplate:function(t){if(t=t||r.getOptions(),e.isFunction(t.template))return t.template();if("string"==typeof t.template)return e.parseHTML(t.template)[0];throw Error("unkown type template.")},textsTargetElement:function(t){return t=t||r.getOptions(),t=t.excludeSelectors.join(","),e(this).find("*")[i]().not(t)},notZeroLengthTextNode:function(){return e(this).contents().filter(function(){return 3===this.nodeType&&0<this.nodeValue.length})},cloneElement:function(e,n){var o=e.cloneNode(!1);return o.appendChild(t.createTextNode(n||"")),o},newTextNode:function(e){return t.createTextNode(e||"")},textNodeToWrapTextNode:function(n,o){return o=o||r.getOptions(),function(i,r){var s=this,l=s.parentNode,d=this.nodeValue,c=t.createDocumentFragment?t.createDocumentFragment():null,u=[];return d.replace(o.splitReg,function(e,t,i,r){e=t&&o.testReg.test(t)?a.cloneElement(n,t):a.newTextNode(t),c?c.appendChild(e):l.insertBefore(e,s),u.push(e)}),c&&l.insertBefore(c,s),e(this).remove(),u}}},r={getOptions:function(t){return e.extend({},o,t)},setOptions:function(t){return o=e.extend(o,t)},getTextsTargetTextNode:function(t,n){n=n||r.getOptions();var o=e(t),o=a.textsTargetElement.call(o,n);return o=a.notZeroLengthTextNode.call(o)},convertTextsWrapTextNode:function(t,n){n=n||r.getOptions();var o=e(t),i=a.getTemplate(n);return o.map(a.textNodeToWrapTextNode(i,n))},getTexts:function(t,n){n=n||r.getOptions();var o=e(t),o=r.getTextsTargetTextNode(o,n),o=r.convertTextsWrapTextNode(o,n);return o=o.filter("*")}};e.fn.extend({texts:function(e){return r.getTexts(this,r.getOptions(e))}}),e.extend({texts:r})}(jQuery,document),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function o(e){return t(s.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),s.json?JSON.parse(e):e}catch(t){}}function a(t,n){var o=s.raw?t:i(t);return e.isFunction(n)?n(o):o}var r=/\+/g,s=e.cookie=function(i,r,l){if(arguments.length>1&&!e.isFunction(r)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var d=l.expires,c=l.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*d)}return document.cookie=[t(i),"=",o(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=i?void 0:{},p=document.cookie?document.cookie.split("; "):[],g=0,m=p.length;m>g;g++){var f=p[g].split("="),h=n(f.shift()),v=f.join("=");if(i===h){u=a(v,r);break}i||void 0===(v=a(v))||(u[h]=v)}return u};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}});var mtl="",map,Bgi={pageMoving:!1,pageAnimation:!1,mapVisited:!1,navIdx:0,subIdx:0,hash:"",data:["winHeight"],element:{},url:"http://file.pmang.com/images/pmang/bless/microsite/",popTemplate:"",ytPlayers:[],iDu:1.5,iRa:1.2};$.ajaxSetup({cache:!1,timeout:3e3});var checkHash=function(){setTimeout(function(){reloadUi()},25)},docmode=document.documentMode;"onhashchange"in window&&(void 0===docmode||docmode>7)?window.onhashchange=checkHash:window.onunload=function(){setTimeout(checkHash,25)};var reloadUi=function(){pageCheck()},setWindowHeight=function(){var e=Bgi.element.$window.height();$("#s1").css("minHeight",e),Bgi.data.winHeight=e},pageMoveBtn=function(){$(document).off().on("click",".btn-html",function(e){return e.preventDefault(),$(this).hasClass("on")?!1:(Bgi.hash=$(this).attr("data-link"),void(Bgi.pageMoving||(Bgi.pageAnimation?senceAni.aniOut():window.location.hash=Bgi.hash)))})},introScrollBlock=function(e){e?$(document).off("mousewheel.block DOMMouseScroll.block"):$(document).on("mousewheel.block DOMMouseScroll.block",function(e){e.stopPropagation(),e.preventDefault()})},ajaxHtml=function(e){Bgi.pageMoving=!0,Bgi.subIdx=0,TweenMax.to(Bgi.element.$load,.5,{opacity:1,zIndex:10,onComplete:function(){TweenMax.set(Bgi.element.$load,{className:"+=ing"}),t()}});var t=function(){setTimeout(function(){$.get(e).done(function(e,t){Bgi.element.$navA.removeClass("on").eq(Bgi.navIdx).addClass("on"),Bgi.element.$container.html(e),pageMoveBtn(),setTimeout(function(){TweenMax.set(Bgi.element.$load,{className:"+=done"}),TweenMax.to(Bgi.element.$load,.5,{delay:2,opacity:0,zIndex:-1,onComplete:function(){TweenMax.set(Bgi.element.$load,{className:"-=ing done"}),Bgi.pageAnimation&&senceAni.aniIn(),Bgi.pageMoving=!1}})},100)}).fail(function(){Bgi.element.$wrap.addClass("ajax-fail")}).always(function(){})},500)}},pageCheck=function(){switch(Bgi.hash=window.location.hash.split("?")[0],Bgi.data=null,Bgi.data=getUrlVars(),popClose(),Bgi.hash.split("#")[1]){case"intro.html":ajaxHtml("intro.html");break;case"story.html":Bgi.navIdx=0,ajaxHtml("story.html");break;case"history.html":Bgi.navIdx=1,ajaxHtml("history.html");break;case"world.html":Bgi.navIdx=2,ajaxHtml("world.html");break;case"people.html":Bgi.navIdx=3,ajaxHtml("people.html");break;case"realm.html":Bgi.navIdx=4,ajaxHtml("realm.html");break;case"class.html":Bgi.navIdx=5,ajaxHtml("class.html");break;case"rxr.html":Bgi.navIdx=6,ajaxHtml("rxr.html");break;default:Bgi.hash="#intro.html",ajaxHtml("intro.html")}},getUrlVars=function(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0,i=n.length;i>o;o++)e=n[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t},startAnimation=function(){},popHtml=function(e,t){var n="하이란"===t?"hieron":"union";Bgi.element.$popPeople.html(Bgi.popTemplate(e)),$(".pp_sld").flexslider({animation:"slide",slideshow:!1,controlNav:!0,directionNav:!0,animationLoop:!1,start:function(){Bgi.element.$popPeople.attr("class","lpop pop_people open "+n)}})},popClose=function(){Bgi.element.$popPeople.hasClass("open")&&(Bgi.element.$popPeople.removeClass("open"),setTimeout(function(){$(".pp_sld").data("flexslider").destroy()},1200))},popTotalOpen=function(){Bgi.element.$popTotal.addClass("open"),Bgi.element.$popTotal.find(".section, a").removeClass("on"),popTotalCurrent()},popTotalClose=function(){Bgi.element.$popTotal.removeClass("open")},popTotalCurrent=function(){var e=Bgi.element.$popTotal.find(".p"+Bgi.navIdx),t=Bgi.element.$popTotal.find(".p4");e.addClass("on"),Bgi.data.camp?t.find(".list").eq("hieron"==Bgi.data.camp?0:1).find("a").eq(Bgi.subIdx).addClass("on"):e.find("a").eq(Bgi.subIdx).addClass("on")},disableF5=function(e){116==(e.which||e.keyCode)&&(e.preventDefault(),e.stopPropagation(),document.location.reload())};$(function(){Bgi.element.$container=$("#container"),Bgi.element.$load=$("#load_layer"),Bgi.element.$loadGif=$("#load_layer .loading"),Bgi.element.$loadLine=$("#load_layer .w"),Bgi.element.$wrap=$("#wrap"),Bgi.element.$nav=$("#nav"),Bgi.element.$navA=$("#nav .gnb a"),Bgi.element.$popPeople=$(".pop_people"),Bgi.element.$popTotal=$(".pop_total"),Bgi.element.$window=$(window),Bgi.element.$doc=$(document);var e=$("#pop-template").html();Bgi.popTemplate=Handlebars.compile(e),reloadUi(),0==ytScript&&ytScriptFire();Bgi.element.$window.on({resize:function(){setWindowHeight()},keydown:disableF5}),Bgi.element.$window.on("keydown",function(e){}),Bgi.element.$nav.on("click",".btn_sitemap",function(){popTotalOpen()}),Bgi.element.$popTotal.on("click","a",function(){popTotalClose()})});var ytScript=!1,onYtPlayerReady=function(e){e.target.setPlaybackQuality("hd1080"),e.target.setVolume(50)},onPlayerStateChange=function(e){if(e.target.g.id||e.target.a.id)var t=$("#"+e.target.a.id+", #"+e.target.g.id).parent();1===e.data?t.addClass("playing"):0===e.data&&t.removeClass("playing")},BrowserDetect={init:function(){var e=document.documentElement;this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown",this.mobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?"mobile":"pc";var t="Explorer"===BrowserDetect.browser&&BrowserDetect.version<9?"old":BrowserDetect.browser+" "+BrowserDetect.browser+BrowserDetect.version+" "+BrowserDetect.mobile;e.className=t},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string;if(this.versionSearchString=e[t].subString,-1!==n.indexOf(e[t].subString))return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!==t){var n=e.indexOf("rv:");return"Trident"===this.versionSearchString&&-1!==n?parseFloat(e.substring(n+3)):parseFloat(e.substring(t+this.versionSearchString.length+1))}},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"MS Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]};BrowserDetect.init();var randomRange=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},evenChk=function(e){var t=$(e+":even");t.addClass("even")},placeHoldBg=function(){$(".ph").each(function(){""==$(this).val()&&$(this).addClass("ph-on")}),$(".ph").unbind("focusin").bind("focusin",function(){""==$(this).val()&&$(this).removeClass("ph-on")}).unbind("focusout").bind("focusout",function(){""==$(this).val()&&$(this).addClass("ph-on")})},windowScrollTo=function(e,t){t||(t=.5),TweenMax.to(Bgi.element.$window,t,{scrollTo:{y:e,autoKill:!0},ease:Expo.easeOut,autoKill:!0,overwrite:5})},layerBtn=function(){var e=function(e){var t=$(window).scrollLeft()+($(window).width()-$(e).width())/2,n=$(window).scrollTop()+($(window).height()-$(e).height())/2;$(window).scrollTop()>n&&(n=$(window).scrollTop()),$(e).css({left:t,top:n})},t=function(){$(".layerpop.on").stop(!0,!1).animate({opacity:0,marginTop:25},250,"easeInQuad",function(){$(this).attr("style","").removeClass("on")}),$(".pop_dim").stop(!0,!1).animate({opacity:0},250,"easeInQuad",function(){$(this).attr("style","").removeClass("on")})},n=function(e){$(e).addClass("on").stop(!0,!1).animate({opacity:1,marginTop:0},250,"easeOutQuad",function(){}),$(".pop_dim").addClass("on").stop(!0,!1).animate({opacity:.7},250,"easeOutQuad",function(){})};$(".btn_layer").on("click",function(){if($(this).hasClass("off"))return!1;var o=$(this).attr("href");return e(o),$(o).hasClass("on")?!1:(t(),n(o),!1)}),$("a.layer_close").on("click",function(){return t(),!1})},tabContents=function(e,t,n){function o(e){return e.hasClass("close")?!1:(s.parent().removeClass("on").addClass("off"),i=e.attr("href"),e.parent().removeClass("off").addClass("on"),l.addClass("off").removeClass("on"),void $(i).addClass("on").removeClass("off"))}var i,a=$(e),r=$(t),s=a.find("ul a"),l=r.find(">div");s.on("click",function(){return _this=$(this),o(_this),!1}),o($(s[n]))},htmlPosition=function(e){var t=$(window).scrollLeft()+($(window).width()-$(e).width())/2,n=$(window).scrollTop()+($(window).height()-$(e).height())/2;$(window).scrollTop()>n&&(n=$(window).scrollTop()),$(e).css({left:t,top:n})},modalPlayStats=!1,modalVideo=function(e,t){var n=t;ytHtml='<iframe width="100%" height="100%" src="http://www.youtube.com/embed/'+n+'?feature=player_detailpage&wmode=opaque&autoplay=1" frameborder="0" allowfullscreen>',videoHtmlHolder=$(".yt_holder"),modalBody=$(".modal_body"),toggleElem=$(".modal_pop"),"open"===e&&modalPlayStats===!1?(modalPlayStats=!0,htmlPosition(modalBody),$(window).on("resize",function(){htmlPosition(modalBody)}),toggleElem.fadeIn(500,"easeInExpo"),$(ytHtml).appendTo(videoHtmlHolder)):"close"===e&&($(window).off("resize"),toggleElem.fadeOut(500,"easeOutExpo",function(){modalBody.find("iframe").detach(),modalPlayStats=!1}))};